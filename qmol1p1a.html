<!--
----------------------------------------------------------------------
 モルクイズ

 HTML(JavaScript, canvas)

 Chemistry (c) Ohtani 2025.8
----------------------------------------------------------------------
-->
<!DOctxYPE html>
<html lang="ja">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
  <meta charset="utf-8">
  <title>モルクイズ</title>
</head>
<body>
<p id="CircularQuiz"></p>
<div style='float:left;'>
モルクイズ
<br>
<form id="target">
Level5 <input type="radio" id="lvl_5" name="amount" value="5" />5<pre></pre>
Level4 <input type="radio" id="lvl_4" name="amount" value="4" />4<pre></pre>
Level3 <input type="radio" id="lvl_3" name="amount" value="3" />3<pre></pre>
Level2 <input type="radio" id="lvl_2" name="amount" value="2" />2<pre></pre>
Level1 <input type="radio" id="lvl_1" name="amount" value="1" />1<pre></pre>
</form>
a b c d  y n
<pre></pre>
<input type="button" id="butS" value="Reset" onclick="inkey(32)">Space
<pre></pre>
<input type="button" id="butR" value="初期化" onclick="inkey(13)">Enter
<pre></pre>
<input type="button" id="butQ" value="細"    onclick="inkey(81)">q
<input type="button" id="butW" value="太"    onclick="inkey(87)">w
<pre></pre>
<input type="button" id="butZ" value="縮"    onclick="inkey(90)">z 
<input type="button" id="butX" value="拡"    onclick="inkey(88)">x
<input type="button" id="butC" value="初"    onclick="inkey(67)">v
<pre></pre>

<script src="https://sciencemathhub.github.io/html/tochem.js"></script>
<script src="https://sciencemathhub.github.io/html/canlib.js"></script>
<script src="https://sciencemathhub.github.io/html/quilib.js"></script>
<script>
'use strict'

//--------------------------------------------------------------------
// Quiz level 1
//--------------------------------------------------------------------
const Qu11 = [
[ ["H_2O の分子量はどれ (H = 1.0, O = 16)"],
  ["16"], ["17"], ["18"], ["33"], 3
],
[ ["CO_2 の分子量はどれ (C = 12, O = 16)"],
  ["28"], ["40"], ["44"], ["64"], 3
],
[ ["NaCl の式量はどれ (Na = 23, Cl = 35.5)"],
  ["23"], ["35.5"], ["58.5"], ["94"], 3
],
[ ["NaOH の式量はどれ (H = 1.0, O = 16, Na = 23)"],
  ["39"], ["40"], ["41"], ["44"], 2
]];

const Qu12 = [
[ ["SO_4^2^- の式量はどれ (O = 16, S = 32)"],
  ["46"], ["48"], ["94"], ["96"], 4
],
[ ["CO_3^2^- の式量はどれ (C = 12, O = 16)"],
  ["26"], ["28"], ["58"], ["60"], 4
],
[ ["Ca(OH)_2 の式量はどれ (H = 1.0, O = 16, Ca = 40)"],
  ["57"], ["58"], ["72"], ["74"], 4
],
[ ["CaCO_3 の式量はどれ (C = 12, O = 16, Ca = 40)"],
  ["68"], ["92"], ["100"], ["124"], 3
],
[ ["CH_3COOH の分子量はどれ (H = 1.0, C = 12, O = 16)"],
  ["56"], ["58"], ["59"], ["60"], 4
]];

const Qu13 = [
[ ["1.0 mol当たりの個数はどれ"],
  ["6.0e-23/mol"], ["6.0e23/mol"], ["6.0e-24/mol"], ["2.0e24/mol"], 2
],
[ ["1.00 mol当たりの気体の体積はどれ"],
  ["1.12 L/mol"], ["2.24 L/mol"], ["11.2 L/mol"], ["22.4 L/mol"], 4
],
[ ["1.0 mol当たりの H_2O の質量はどれ (H_2O = 18)"],
  ["1.8 g/mol"], ["9.0 g/mol"], ["18 g/mol"], ["36 g/mol"], 3
]];

const Qu14 = [
[ ["2.0 molの個数はどれ"],
  ["1.2e23"], ["3.0e23"], ["6.0e23"], ["1.2e24"], 4
],
[ ["2.00 molの気体の体積はどれ"],
  ["2.24 L"], ["4.48 L"], ["22.4 L"], ["44.8 L"], 4
],
[ ["2.0 molの H_2O の質量はどれ (H_2O = 18)"],
  ["3.6 g"], ["9.0 g"], ["18 g"], ["36 g"], 4
]];

const Qu15 = [
[ ["原子Aの同位体^nA,^mAの相対質量 10.0, 11.0,存在比 50.0%, 50.0% の原子量はどれ"],
  ["10.1"], ["10.2"], ["10.4"], ["10.5"], 4
],
[ ["原子Aの同位体^nA,^mAの相対質量 10.0, 11.0,存在比 80.0%, 20.0% の原子量はどれ"],
  ["10.1"], ["10.2"], ["10.4"], ["10.5"], 2
],
[ ["原子Aの同位体^nA,^mAの相対質量 10.0, 11.0,存在比 90.0%, 10.0% の原子量はどれ"],
  ["10.1"], ["10.2"], ["10.4"], ["10.5"], 1
]];

//--------------------------------------------------------------------
// Quiz level 2
//--------------------------------------------------------------------
const Qu21 = [
[ ["0.10 molの個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 1
],
[ ["0.50 molの個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 2
],
[ ["2.0 molの個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 3
],
[ ["10 molの個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 4
],

[ ["6.0e22 の物質量はどれ"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 1
],
[ ["3.0e23 の物質量はどれ"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 2
],
[ ["1.2e24 の物質量はどれ"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 3
],
[ ["6.0e24 の物質量はどれ"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 4
]];

const Qu22 = [
[ ["0.100 molの気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 1
],
[ ["0.500 molの気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 2
],
[ ["2.00 molの気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 3
],
[ ["10.0 molの気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 4
],

[ ["2.24 Lの気体の物質量はどれ"],
  ["0.100 mol"], ["0.500 mol"], ["2.00 mol"], ["10.0 mol"], 1
],
[ ["11.2 Lの気体の物質量はどれ"],
  ["0.100 mol"], ["0.500 mol"], ["2.00 mol"], ["10.0 mol"], 2
],
[ ["44.8 Lの気体の物質量はどれ"],
  ["0.100 mol"], ["0.500 mol"], ["2.00 mol"], ["10.0 mol"], 3
],
[ ["224 Lの気体の物質量はどれ"],
  ["0.100 mol"], ["0.500 mol"], ["2.00 mol"], ["10.0 mol"], 4
]];

const Qu23 = [
[ ["0.10 molの H_2O の質量はどれ (H_2O = 18)"],
  ["1.8 g"], ["9.0 g"], ["36 g"], ["180 g"], 1
],
[ ["0.50 molの H_2O の質量はどれ (H_2O = 18)"],
  ["1.8 g"], ["9.0 g"], ["36 g"], ["180 g"], 2
],
[ ["2.0 molの H_2O の質量はどれ (H_2O = 18)"],
  ["1.8 g"], ["9.0 g"], ["36 g"], ["180 g"], 3
],
[ ["10 molの H_2O の質量はどれ (H_2O = 18)"],
  ["1.8 g"], ["9.0 g"], ["36 g"], ["180 g"], 4
],

[ ["1.8 gの H_2O の物質量はどれ (H_2O = 18)"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 1
],
[ ["9.0 gの H_2O の物質量はどれ (H_2O = 18)"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 2
],
[ ["36 gの H_2O の物質量はどれ (H_2O = 18)"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 3
],
[ ["180 gの H_2O の物質量はどれ (H_2O = 18)"],
  ["0.10 mol"], ["0.50 mol"], ["2.0 mol"], ["10 mol"], 4
]];

const Qu24 = [
[ ["分子 6.0e22 個の気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 1
],
[ ["分子 3.0e23 個の気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 2
],
[ ["分子 1.2e24 個の気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 3
],
[ ["分子 6.0e24 個の気体の体積はどれ"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 4
],

[ ["体積 2.24 L の気体の分子の個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 1
],
[ ["体積 11.2 L の気体の分子の個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 2
],
[ ["体積 44.8 L の気体の分子の個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 3
],
[ ["体積 224 L の気体の分子の個数はどれ"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 4
]];

const Qu25 = [
[ ["体積 2.24 Lの CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 1
],
[ ["体積 11.2 Lの CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 2
],
[ ["体積 44.8 Lの CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 3
],
[ ["体積 224 Lの CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 4
],

[ ["質量 4.4 gの CO_2 の体積はどれ (CO_2 = 44)"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 1
],
[ ["質量 22 gの CO_2 の体積はどれ (CO_2 = 44)"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 2
],
[ ["質量 88 gの CO_2 の体積はどれ (CO_2 = 44)"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 3
],
[ ["質量 440 gの CO_2 の体積はどれ (CO_2 = 44)"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 4
],

[ ["6.0e22 個の CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 1
],
[ ["3.0e23 個の CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 2
],
[ ["1.2e24 個の CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 3
],
[ ["6.0e24 個の CO_2 の質量はどれ (CO_2 = 44)"],
  ["4.4 g"], ["22 g"], ["88 g"], ["440 g"], 4
],

[ ["4.4 gの CO_2 の個数はどれ (CO_2 = 44)"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 1
],
[ ["22 gの CO_2 の個数はどれ (CO_2 = 44)"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 2
],
[ ["88 gの CO_2 の個数はどれ (CO_2 = 44)"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 3
],
[ ["440 gの CO_2 の個数はどれ (CO_2 = 44)"],
  ["6.0e22"], ["3.0e23"], ["1.2e24"], ["6.0e24"], 4
]];

//--------------------------------------------------------------------
// Quiz level 3
//--------------------------------------------------------------------
const Qu31 = [
[ ["メタン CH_4 の完全燃焼はどれ"],
  ["CH_4 + 2O_2 → CO_2 + 2H_2O"],
  ["CH_4 + 2O_2 → 2CO_2 + H_2O"],
  ["2CH_4 + O_2 → 2CO_2 + H_2O"],
  ["CH_4 + 4O_2 → CO_2 + 2H_2O"], 1
],
[ ["マグネシウム Mg と塩酸 HCLaq の反応はどれ"],
  ["Mg + 2HCl → MgCl_2 + H_2"  ],
  ["Mg + 2HCl → MgCl_2 + 2H_2" ],
  ["2Mg + 2HCl → 2MgCl_2 + H_2"],
  ["Mg + HCl → MgCl_2 + H_2"   ], 1
],
[ ["エタン C_2H_6 の完全燃焼はどれ"],
  ["2C_2H_6 + 7O_2 → 4CO_2 + 6H_2O"],
  ["C_2H_6 + 3O_2 → 2CO_2 + 3H_2O" ],
  ["2C_2H_6 + 5O_2 → 4CO_2 + 6H_2O"],
  ["2C_2H_6 + 5O_2 → 2CO_2 + 6H_2O"], 1
],
[ ["メタノール CH_3OH の完全燃焼はどれ"],
  ["2CH_3OH + 3O_2 → 2CO_2 + 4H_2O"],
  ["2CH_3OH + 4O_2 → 2CO_2 + 4H_2O"],
  ["2CH_3OH + 3O_2 → 2CO_2 + 3H_2O"],
  ["CH_3OH + 2O_2 → CO_2 + 2H_2O"  ], 1
],
[ ["エタノール C_2H_5OH の完全燃焼はどれ"],
  ["C_2H_5OH + 3O_2 → 2CO_2 + 3H_2O" ],
  ["C_2H_5OH + 4O_2 → 2CO_2 + 3H_2O" ],
  ["C_2H_5OH + 3O_2 → 2CO_2 + 2H_2O" ],
  ["2C_2H_5OH + 7O_2 → 4CO_2 + 6H_2O"], 1
],
[ ["グルコース C_6H_1_2O_6 の呼吸による分解はどれ"],
  ["C_6H_1_2O_6 + 6O_2 → 6CO_2 + 6H_2O"],
  ["C_6H_1_2O_6 + 9O_2 → 6CO_2 + 6H_2O"],
  ["C_6H_1_2O_6 + 6O_2 → 3CO_2 + 6H_2O"],
  ["C_6H_1_2O_6 + 3O_2 → 3CO_2 + 3H_2O"], 1
],
[ ["グルコース C_6H_1_2O_6 の光合成はどれ"],
  ["6CO_2 + 6H_2O → C_6H_1_2O_6 + 6O_2"],
  ["6CO_2 + 6H_2O → C_6H_1_2O_6 + 9O_2"],
  ["3CO_2 + 6H_2O → C_6H_1_2O_6 + 6O_2"],
  ["3CO_2 + 3H_2O → C_6H_1_2O_6 + 3O_2"], 1
]];

const Qu32 = [
[ ["2.0 molの CH_4 から生じる CO_2 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["1.0 mol"], ["2.0 mol"], ["3.0 mol"], ["4.0 mol"], 2
],
[ ["2.0 molの CH_4 から生じる H_2O の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["1.0 mol"], ["2.0 mol"], ["3.0 mol"], ["4.0 mol"], 4
],
[ ["2.0 molの CH_4 で消費する O_2 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["1.0 mol"], ["2.0 mol"], ["3.0 mol"], ["4.0 mol"], 4
],
[ ["1.0 molの H_2O が生じるとき CH_4 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.10 mol"], ["0.50 mol"], ["1.0 mol"], ["2.0 mol"], 2
],
[ ["1.0 molの H_2O が生じるとき CO_2 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.10 mol"], ["0.50 mol"], ["1.0 mol"], ["2.0 mol"], 2
],
[ ["1.0 molの H_2O が生じるとき O_2 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.10 mol"], ["0.50 mol"], ["1.0 mol"], ["2.0 mol"], 3
]];

const Qu33 = [
[ ["3.2 gの CH_4(=16) から生じる CO_2 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.10 mol"], ["0.20 mol"], ["0.40 mol"], ["0.50 mol"], 2
],
[ ["11.2 Lの CH_4 から生じる H_2O の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.10 mol"], ["0.50 mol"], ["1.0 mol"], ["2.0 mol"], 3
],
[ ["1.6 gの CH_4(=16) で消費する O_2 の物質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.10 mol"], ["0.20 mol"], ["0.40 mol"], ["0.50 mol"], 2
]];

const Qu34 = [
[ ["8.0 gの CH_4(=16) から生じる CO_2 の体積はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["2.24 L"], ["11.2 L"], ["44.8 L"], ["224 L"], 2
],
[ ["2.24 Lの CH_4 から生じる H_2O(=18)の質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["1.8 g"], ["3.6 g"], ["18 g"], ["36 g"], 2
],
[ ["1.6 gの CH_4(=16) で消費する O_2 の個数はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["6.0e22"], ["1.2e23"], ["3.0e23"], ["6.0e23"], ["1.2e24"], 2
]];

const Qu35 = [
[ ["2.24 Lの O_2 を消費するとき CH_4(=16) の質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["0.80 g", "1.6 g"], ["3.6 g"], ["8.0 g"], 1
],
[ ["11.2 Lの O_2 を消費するとき CH_4(=16) の質量はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["2.0 g", "4.0 g"], ["8.0 g"], ["16 g"], 2
],
[ ["3.2 gの O_2(=32) を消費するとき CO_2 の体積はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["1.12 L"], ["2.24 L"], ["11.2 L"], ["22.4 L"], 1
],
[ ["16 gの O_2(=32) を消費するとき CO_2 の体積はどれ (CH_4 + 2O_2 → CO_2 + 2H_2O)"],
  ["2.8 L"], ["5.6 L"], ["11.2 L"], ["22.4 L"], 2
]];

//--------------------------------------------------------------------
// Quiz level 4
//--------------------------------------------------------------------
const Qu41 = [
[ ["4.0 gの溶質を 196 gの水(溶媒)に溶かした水溶液の質量パーセント濃度はどれ"],
  ["2.0 %"], ["5.0 %"], ["10 %"], ["20 %"], 1
],
[ ["10 gの溶質を 190 gの水(溶媒)に溶かした水溶液の質量パーセント濃度はどれ"],
  ["2.0 %"], ["5.0 %"], ["10 %"], ["20 %"], 2
],
[ ["20 gの溶質を 180 gの水(溶媒)に溶かした水溶液の質量パーセント濃度はどれ"],
  ["2.0 %"], ["5.0 %"], ["10 %"], ["20 %"], 3
],
[ ["40 gの溶質を 160 gの水(溶媒)に溶かした水溶液の質量パーセント濃度はどれ"],
  ["2.0 %"], ["5.0 %"], ["10 %"], ["20 %"], 4
]];

const Qu42 = [
[ ["質量パーセント濃度 20 %, 50 gの水溶液中の溶質の質量はどれ"],
  ["2.0 g"], ["5.0 g"], ["10 g"], ["20 g"], 3
],
[ ["質量パーセント濃度 5.0 %, 400 gの水溶液中の溶質の質量はどれ"],
  ["2.0 g"], ["5.0 g"], ["10 g"], ["20 g"], 4
],
[ ["質量パーセント濃度 20 %, 200 gの水溶液中の水(溶媒)の質量はどれ"],
  ["120 g"], ["140 g"], ["160 g"], ["180 g"], 3
],
[ ["質量パーセント濃度 10 %, 500 gの水溶液中の水(溶媒)の質量はどれ"],
  ["400 g"], ["410 g"], ["450 g"], ["490 g"], 3
]];

const Qu43 = [
[ ["0.20 molの NaOH に水を加えて 100 mLにした水溶液のモル濃度はどれ"],
  ["0.20 mol/L"], ["0.40 mol/L"], ["1.0 mol/L"], ["2.0 mol/L"], 4
],
[ ["0.20 molの NaOH に水を加えて 500 mLにした水溶液のモル濃度はどれ"],
  ["0.20 mol/L"], ["0.40 mol/L"], ["1.0 mol/L"], ["2.0 mol/L"], 2
],
[ ["0.20 molの NaOH に水を加えて 200 mLにした水溶液のモル濃度はどれ"],
  ["0.20 mol/L"], ["0.40 mol/L"], ["1.0 mol/L"], ["2.0 mol/L"], 3
]];

const Qu44 = [
[ ["4.0 gの NaOH(=40)に水を加えて 100 mLにした水溶液のモル濃度はどれ"],
  ["0.20 mol/L"], ["0.50 mol/L"], ["1.0 mol/L"], ["2.5 mol/L"], 3
],
[ ["10 gの NaOH(=40)に水を加えて 500 mLにした水溶液のモル濃度はどれ"],
  ["0.20 mol/L"], ["0.50 mol/L"], ["1.0 mol/L"], ["2.5 mol/L"], 2
],
[ ["20 gの NaOH(=40)に水を加えて 200 mLにした水溶液のモル濃度はどれ"],
  ["0.20 mol/L"], ["0.50 mol/L"], ["1.0 mol/L"], ["2.5 mol/L"], 4
]];

const Qu45 = [
[ ["2.0 mol/Lの NaOHaq 500 mL中の NaOH(=40)の質量はどれ"],
  ["4.0 g"], ["8.0 g"], ["20 g"], ["40 g"], 4
],
[ ["2.0 mol/Lの NaOHaq 100 mL中の NaOH(=40)の質量はどれ"],
  ["4.0 g"], ["8.0 g"], ["20 g"], ["40 g"], 2
],
[ ["2.0 mol/Lの NaOHaq 250 mL中の NaOH(=40)の質量はどれ"],
  ["4.0 g"], ["8.0 g"], ["20 g"], ["40 g"], 3
]];

//--------------------------------------------------------------------
// Quiz level 5
//--------------------------------------------------------------------
const Qu51 = [
[ ["1.0 mol/L 200 mLのHCLaqに溶けるMgの物質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.10 mol"], ["0.20 mol"], ["0.50 mol"], ["1.0 mol"], 1
],
[ ["2.0 mol/L 200 mLのHCLaqに溶けるMgの物質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.10 mol"], ["0.20 mol"], ["0.50 mol"], ["1.0 mol"], 2
],
[ ["2.0 mol/L 500 mLのHCLaqに溶けるMgの物質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.10 mol"], ["0.20 mol"], ["0.50 mol"], ["1.0 mol"], 3
],
[ ["4.0 mol/L 500 mLのHCLaqに溶けるMgの物質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.10 mol"], ["0.20 mol"], ["0.50 mol"], ["1.0 mol"], 4
]];

const Qu52 = [
[ ["2.0 mol/L 100 mLのHCLaqに溶けるMg(=24)の質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["2.4 g"], ["6.0 g"], ["12 g"], ["24 g"], 1
],
[ ["2.0 mol/L 250 mLのHCLaqに溶けるMg(=24)の質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["2.4 g"], ["6.0 g"], ["12 g"], ["24 g"], 2
],
[ ["4.0 mol/L 250 mLのHCLaqに溶けるMg(=24)の質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["2.4 g"], ["6.0 g"], ["12 g"], ["24 g"], 3
],
[ ["4.0 mol/L 500 mLのHCLaqに溶けるMg(=24)の質量はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["2.4 g"], ["6.0 g"], ["12 g"], ["24 g"], 4
]];

const Qu53 = [
[ ["0.10 molの Mg が 500 mLのHCLaqに溶ける濃度はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.40 mol/L"], ["0.80 mol/L"], ["2.0 mol/L"], ["4.0 mol/L"], 1
],
[ ["0.20 molの Mg が 500 mLのHCLaqに溶ける濃度はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.40 mol/L"], ["0.80 mol/L"], ["2.0 mol/L"], ["4.0 mol/L"], 2
],
[ ["0.50 molの Mg が 500 mLのHCLaqに溶ける濃度はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.40 mol/L"], ["0.80 mol/L"], ["2.0 mol/L"], ["4.0 mol/L"], 3
],
[ ["1.0 molの Mg が 500 mLのHCLaqに溶ける濃度はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["0.40 mol/L"], ["0.80 mol/L"], ["2.0 mol/L"], ["4.0 mol/L"], 4
]];

const Qu54 = [
[ ["1.12 LのH_2が生じる 1.0 mol/LのHCLaqの体積はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["50 mL"], ["100 mL"], ["200 mL"], ["400 mL"], 2
],
[ ["2.24 LのH_2が生じる 1.0 mol/LのHCLaqの体積はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["50 mL"], ["100 mL"], ["200 mL"], ["400 mL"], 3
],
[ ["4.48 LのH_2が生じる 1.0 mol/LのHCLaqの体積はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["50 mL"], ["100 mL"], ["200 mL"], ["400 mL"], 4
]];

const Qu55 = [
[ ["2.0 mol/L 100 mLのHCLaq + Mg 1.0 molの結果はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["Mg が 0.90 mol残る"], ["HCl が 0.50 mol残る"],
  ["Mg が 0.50 mol残る"], ["HCl が 0.20 mol残る"], 1
],
[ ["2.0 mol/L 500 mLのHCLaq + Mg 1.0 molの結果はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["Mg が 0.90 mol残る"], ["HCl が 0.50 mol残る"],
  ["Mg が 0.50 mol残る"], ["HCl が 0.20 mol残る"], 3
],
[ ["5.0 mol/L 500 mLのHCLaq + Mg 1.0 molの結果はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["Mg が 0.90 mol残る"], ["HCl が 0.50 mol残る"],
  ["Mg が 0.50 mol残る"], ["HCl が 0.20 mol残る"], 2
],
[ ["4.4 mol/L 500 mLのHCLaq + Mg 1.0 molの結果はどれ (Mg + 2HCl → MgCl_2 + H_2)"],
  ["Mg が 0.90 mol残る"], ["HCl が 0.50 mol残る"],
  ["Mg が 0.50 mol残る"], ["HCl が 0.20 mol残る"], 4
]];

const Quiz1 = [ Qu11, Qu12, Qu13, Qu14, Qu15 ];
const Quiz2 = [ Qu21, Qu22, Qu23, Qu24, Qu25 ];
const Quiz3 = [ Qu31, Qu32, Qu33, Qu34, Qu35 ];
const Quiz4 = [ Qu41, Qu42, Qu43, Qu44, Qu45 ];
const Quiz5 = [ Qu51, Qu52, Qu53, Qu54, Qu55 ];

const Quiz0 = [ Quiz1, Quiz2, Quiz3, Quiz4, Quiz5 ];

//--------------------------------------------------------------------
// public letiable
//--------------------------------------------------------------------
const B = new BASIC();
const C0 = '#000'
const C1 = '#24f'
const C2 = '#f88'
const C3 = '#f8f'
const C4 = '#8f8'
const C5 = '#8ff'
const C6 = '#ff8'
const C7 = '#fff'

let Temp; // debug

//------------------------------------------------------------------------------
// QUIZ
//------------------------------------------------------------------------------
const Q = new QUIZ();

//--------------------------------------------------------------------
// select
//--------------------------------------------------------------------
function select(n, c1, c0)
{
  let rect, x, y, w, h;

  rect = Q.area(n);
  x = rect[0];
  y = rect[1];
  w = rect[2];
  h = rect[3];
  B.LINEBF(x, y, x+w, y+h, c0);
  B.LINEB (x, y, x+w, y+h, c1);
}

//--------------------------------------------------------------------
// answer
//--------------------------------------------------------------------
function dispans1(i, a, b)
{
  let s;

  B.TAB(   0.5, -0.5); B.PRINTe(a);
  s = "".padEnd(i+1, '_');
  B.TAB(-i-0.5,  0  ); B.PRINT (s);
  B.TAB(-i-0.5,  1.0); B.PRINTe(b);
  B.TAB(   0  , -0.5);
}

function dispans(x, y, s, ans)
{
  let a, b, w, h, i, n, f;

  w = 8;
  h = 9;
  B.LOCATEp(x+w, y+h); B.PRINT(s + ": ");
  f = 1;
  n = ans.length;
  for (i = 0; i < n;)
  {
    if (f)
    {
      B.PRINTe(ans[i++]); f = 0; continue;
    }
    dispans1(ans[i], ans[i+1], ans[i+2]); i += 3; f = 1;
  }
}

function answer(quiz, n)
{
  let r;

  select(0, C7, (n == 1)? C3 : C1);
  select(1, C7, (n == 2)? C3 : C1);
  select(2, C7, (n == 3)? C3 : C1);
  select(3, C7, (n == 4)? C3 : C1);
  r = Q.area(0); dispans(r[0], r[1], "A", quiz[1]);
  r = Q.area(1); dispans(r[0], r[1], "B", quiz[2]);
  r = Q.area(2); dispans(r[0], r[1], "C", quiz[3]);
  r = Q.area(3); dispans(r[0], r[1], "D", quiz[4]);
}

//--------------------------------------------------------------------
// question
//--------------------------------------------------------------------
function dispque(ans)
{
  let a, b, w, h, i, n, f;

  f = 1;
  n = ans.length;
  for (i = 0; i < n;)
  {
    if (f)
    {
      B.PRINTe(ans[i++]); f = 0; continue;
    }
    dispans1(ans[i], ans[i+1], ans[i+2]); i += 3; f = 1;
  }
}

//--------------------------------------------------------------------
// yes no
//--------------------------------------------------------------------
function yesno(n, s)
{
  let r, i1, i2;

  i1 = 4 + s * 2;
  i2 = i1 + 1;
  select(i1, C7, (n == 1)? C3 : C1);
  select(i2, C7, (n == 2)? C3 : C1);
  r = Q.area(i1); dispans(r[0], r[1], "Y", ["Yes."]);
  r = Q.area(i2); dispans(r[0], r[1], "N", ["No." ]);
}

//--------------------------------------------------------------------
// gold
//--------------------------------------------------------------------
function gold(x, y)
{
  let n, c;

  n = Q.count(-1);
  if (n == 6) c = C5; else if (n == 5) c = C7; else c = C3;
  B.LOCATE(x, y  ); B.COLOR(c); B.PRINT("5問目  1,000,000点");
  if (n == 5) c = C5; else if (n == 4) c = C7; else c = C3;
  B.LOCATE(x, y+1); B.COLOR(c); B.PRINT("4問目    100,000点");
  if (n == 4) c = C5; else if (n == 3) c = C7; else c = C3;
  B.LOCATE(x, y+2); B.COLOR(c); B.PRINT("3問目     10,000点");
  if (n == 3) c = C5; else if (n == 2) c = C7; else c = C3;
  B.LOCATE(x, y+3); B.COLOR(c); B.PRINT("2問目      1,000点");
  if (n == 2) c = C5; else if (n == 1) c = C7; else c = C3;
  B.LOCATE(x, y+4); B.COLOR(c); B.PRINT("1問目        100点");
}

//--------------------------------------------------------------------
// gold
//--------------------------------------------------------------------
const QuizN = 5;
function next(count)
{
  let q;

  Q.count(count);
  if (count <= QuizN) Q.state(0); else count = QuizN;
  Q.answer(0);
  Q.yesno(0);
  q = Q.question(Q.level(-1), count, Quiz0)
  Q.quiz(q);
  blur();
  window.requestAnimationFrame(main);
}

//--------------------------------------------------------------------
// screen
//--------------------------------------------------------------------
function display()
{
  const s = ['A', 'B', 'C', 'D'];
  let q, a, n, m;

  B.FONT(1,0);
  B.CLS('#000');

  B.WINDOW(0, 0, 639, 399);

  gold(59, 1);
  B.COLOR(C5);
  B.LOCATE(0, 1);
  B.TAB(1, 0); B.PRINTe("化学式 = M, 化学式(=M)のMは原子量,分子量,式量"); B.CR();
  B.TAB(1, 0); B.PRINTe("気体の体積は標準状態(0℃, 1013hPa)"           ); B.CR();
  B.TAB(1, 0); B.PRINTe("アボガドロ定数 N_A = 6.0e+23 /mol"            ); B.CR();
  B.TAB(1, 0); B.PRINTe("aq は水溶液(aqua)"                            ); B.CR();
  B.LOCATE(0, 8);
  B.COLOR(C7);
  n = Q.count(-1); if (n > QuizN) n = QuizN;
  a = Q.level(-1)*1000 + n*100 + Q.number(-1);
  q = Q.quiz(null);
  B.TAB(1, 0); B.PRINT(n + "問目 (" + a + ")"); B.CR(); B.CR();
  B.TAB(1, 0); dispque(q[0]); B.CR();

  a = Q.answer(-1);
  answer(q, a);
  n = 0;
  if (a > 0)
  {
    m = Q.state(-1);
    if (m < 2)
    {
      n = Q.yesno(-1) - m * 2;
      if (n > 2) n = 0;
      yesno(n, m);
    }
    B.LOCATE(0, 19);
    B.TAB(1, 0); B.PRINT (s[a-1] + "でファイナルアンサー? ");
    if (n == 1 || m > 0)
    {
      if (a == q[5])
      {
        if (m == 1)
        {
          if (Q.count(-1) < QuizN)
          {
            switch(n)
            {
              case 1: next(Q.count(-1) + 1); return;
              case 2: next(Q.count(-1)    ); return;
            }
          }
          else
          {
            if (n > 0) { next(1); return; }
          }
        }
        B.TAB(1, 0); B.PRINT ("正解!");
        if (Q.count(-1) < QuizN)
        {
          B.PRINT ("  次の問題に進みますか?");
          Q.state(1);
        }
        else
        {
          if (m < 2) Q.count(Q.count(-1)+1);
          B.PRINT("  おめでとうございます!!");
          B.CR(); B.CR();
          B.TAB(1, 0); B.PRINT("もう一度挑戦するときは");
                       B.PRINT("ResetかLevelボタンを押して下さい");
          B.CR();
          Q.state(2);
        }
        Q.yesno(0);
        if (n > 0) window.requestAnimationFrame(display);
        return;
      }
      else
      {
        B.TAB(1, 0); B.PRINT ("残念!  " + s[q[5]-1] + " でした");
        B.CR(); B.CR();
        B.TAB(1, 0); B.PRINT("もう一度挑戦するときは");
        B.TAB(1, 0); B.PRINT("ResetかLevelボタンを押して下さい");
        B.CR();
        Q.state(2);
        Q.yesno(0);
        if (n > 0) window.requestAnimationFrame(display);
        return;
      }
    }
  }

//  B.LOCATE(1, 0); B.COLOR('#fff'); B.PRINT(Temp); B.CR();

  Q.yesno(0);
  if (n == 2)
  {
    Q.answer(0);
    window.requestAnimationFrame(display);
  }
}

//--------------------------------------------------------------------
// input
//--------------------------------------------------------------------
function pushinit()
{
  let v, i;

  v = document.getElementById("target");
  for (i = 0; i < v.length; i++)
  {
    v[i].checked = false;
  }
  v[v.length-1].checked = true;
}

function pushget()
{
  let v, i;

  v = document.getElementById("target");
  for (i = 0; i < v.length; i++)
  {
    if (v[i].checked) { Q.level(5 - i); break; }
  }
  window.requestAnimationFrame(display);
}

function blur()
{
  document.getElementById('lvl_5').blur();
  document.getElementById('lvl_4').blur();
  document.getElementById('lvl_3').blur();
  document.getElementById('lvl_2').blur();
  document.getElementById('lvl_1').blur();

  document.getElementById('butS').blur();
  document.getElementById('butR').blur();
  document.getElementById('butQ').blur();
  document.getElementById('butW').blur();
  document.getElementById('butZ').blur();
  document.getElementById('butX').blur();
  document.getElementById('butC').blur();
}

function reset()
{
  pushget();
  next(1);
}

function pushlvl()
{
  let v, i;

  v = document.getElementById("target");
  for (i = 0; i < v.length; i++)
  {
    if (v[i].checked) { Q.level(5 - i); break; }
  }
  Q.count(1);
  reset();
}

document.getElementById("target").addEventListener('input', pushlvl);

function keylvl(x)
{
  let v, i;

  v = document.getElementById("target");
  for (i = 0; i < v.length; i++)
  {
    v[i].checked = (i == x)? true : false;
  }
  pushlvl();
  reset();
}

//--------------------------------------------------------------------
// init
//--------------------------------------------------------------------
function init()
{
  const a =
  [
    [  8, 200, 280,  40], // a
    [298, 200, 280,  40], // b
    [  8, 250, 280,  40], // c
    [298, 250, 280,  40], // d
    [  8, 330, 135,  40], // y
    [153, 330, 135,  40], // n
    [298, 330, 135,  40], // y
    [443, 330, 135,  40]  // n
  ];

  Q.init();
  Q.setarea(a);
  pushinit();
  reset();
}

//--------------------------------------------------------------------
// Input key
//--------------------------------------------------------------------
function keyon(key)
{
  let f, d, s, n;

  f = 0;
  // SHIFT16 CTRL17 ALT18
  if      (Key[ 16]) { s =  5; }
  else               { s = 15; }

  if      (Key[ 38] || key == 38) //↑
  {
    d += s; f = 1;
  }
  else if (Key[ 40] || key == 40) //↓
  {
    d -= s; f = 1;
  }
  else if (Key[ 39] || key == 39) //→
  {
    d -= s; f = 1;
  } 
  else if (Key[ 37] || key == 37) //←
  {
    d += s; f = 1;
  }
  if (f == 0) return 0;
  return 1;
}

function inkey(key)
{
  switch (key)
  {
    case  13: init() ; key = 0; break; // Enter
    case  32: reset(); key = 0; break; // ' '
    case  81: B.lineWidth( 0.5); key = 0; break; // 'Q'
    case  87: B.lineWidth( 2  ); key = 0; break; // 'W'
    case  90: B.zooming  (-1  ); key = 0; break; // 'Z'
    case  88: B.zooming  ( 1  ); key = 0; break; // 'X'
    case  86: B.zooming  ( 0  ); key = 0; break; // 'V'
    case  53: keylvl(0)  ; key = 0; break; // '5'
    case  52: keylvl(1)  ; key = 0; break; // '4'
    case  51: keylvl(2)  ; key = 0; break; // '3'
    case  50: keylvl(3)  ; key = 0; break; // '2'
    case  49: keylvl(4)  ; key = 0; break; // '1'
    case  65: Q.answer(1); key = 0; break; // 'a'
    case  66: Q.answer(2); key = 0; break; // 'b'
    case  67: Q.answer(3); key = 0; break; // 'c'
    case  68: Q.answer(4); key = 0; break; // 'd'
    case  89: Q.yesno(1) ; key = 0; break; // 'y'
    case  78: Q.yesno(2) ; key = 0; break; // 'n'
    default : if (keyon(key))    key = 0;
  }
  if (key) return;
  blur();
  window.requestAnimationFrame(display);
}
document.body.addEventListener('keydown', event =>
{
  let key = event.keyCode;

  inkey(key);
});

//--------------------------------------------------------------------
// Key status
//--------------------------------------------------------------------
let Key = new Array(256);
for (let i = 0; i < 256; i++) Key[i] = 0;
window.onkeydown = function(event) { Key[event.keyCode] = 1; }
window.onkeyup   = function(event) { Key[event.keyCode] = 0; }

//----------------------------------------------------------------------
// mouse
//----------------------------------------------------------------------
function mouseDn(x, y, touch)
{
  let x1, y1, i, d;

  if (!(0 <= x && x <= canvas.width )) return 0;
  if (!(0 <= y && y <= canvas.height)) return 0;

  x1 = B.winX(x);
  y1 = B.winY(y);

  for (i = 0; i < Q.area(-1); i++)
  {
    d = Q.area(i);
    if ((d[0] <= x1 && x1 < d[0] + d[2])
     && (d[1] <= y1 && y1 < d[1] + d[3]))
    {
      if (i < 4) { if (Q.state(-1) == 0) Q.answer(i     + 1); }
      else       {                       Q.yesno (i - 4 + 1); }
      blur();
      window.requestAnimationFrame(display);
      return 0;
    }
  }
  blur();
  return 1;
}

function mouseMv(x, y, touch)
{
  let x1, y1, d, d1, i;

  x1 = B.winX(x);
  y1 = B.winY(y);
  blur();
  window.requestAnimationFrame(display);
}

const M = new MOUSE();
M.add();
M.mosDnFunc(mouseDn);
M.mosMvFunc(mouseMv);

//--------------------------------------------------------------------
// main
//--------------------------------------------------------------------
function main()
{
  display();
}
init();

//--------------------------------------------------------------------
</script>
</body>
</html>
